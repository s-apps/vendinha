(self.webpackChunkvendinha=self.webpackChunkvendinha||[]).push([[445],{4445:(e,t,i)=>{"use strict";i.r(t),i.d(t,{comprasModule:()=>I,customCurrencyMaskConfig:()=>b});var n=i(1116),s=i(7569),a=i(1041),l=i(5366),r=i(7183),u=i(4204),h=i(2797),o=i(3070),p=i(3841),c=i(9550),d=i(1509),m=function(e){return e[e.FINANCIAL=0]="FINANCIAL",e[e.NATURAL=1]="NATURAL",e}({});let g=new l.OlP("currency.mask.config");class f{constructor(e){this.htmlInputElement=e}setCursorAt(e){if(this.htmlInputElement.setSelectionRange)this.htmlInputElement.focus(),this.htmlInputElement.setSelectionRange(e,e);else if(this.htmlInputElement.createTextRange){let t=this.htmlInputElement.createTextRange();t.collapse(!0),t.moveEnd("character",e),t.moveStart("character",e),t.select()}}updateValueAndCursor(e,t,i){this.rawValue=e,this.setCursorAt(i-=t-e.length)}get canInputMoreNumbers(){let e=!(this.rawValue.replace(/[^0-9\u0660-\u0669\u06F0-\u06F9]/g,"").length>=this.htmlInputElement.maxLength&&this.htmlInputElement.maxLength>=0),t=this.inputSelection.selectionStart,i=this.inputSelection.selectionEnd,n=!(t==i||!this.htmlInputElement.value.substring(t,i).match(/[^0-9\u0660-\u0669\u06F0-\u06F9]/)),s="0"==this.htmlInputElement.value.substring(0,1);return e||n||s}get inputSelection(){let e=0,t=0;if("number"==typeof this.htmlInputElement.selectionStart&&"number"==typeof this.htmlInputElement.selectionEnd)e=this.htmlInputElement.selectionStart,t=this.htmlInputElement.selectionEnd;else{let i=document.selection.createRange();if(i&&i.parentElement()==this.htmlInputElement){let n=this.htmlInputElement.value.length,s=this.htmlInputElement.value.replace(/\r\n/g,"\n"),a=this.htmlInputElement.createTextRange();a.moveToBookmark(i.getBookmark());let l=this.htmlInputElement.createTextRange();l.collapse(!1),a.compareEndPoints("StartToEnd",l)>-1?e=t=n:(e=-a.moveStart("character",-n),e+=s.slice(0,e).split("\n").length-1,a.compareEndPoints("EndToEnd",l)>-1?t=n:(t=-a.moveEnd("character",-n),t+=s.slice(0,t).split("\n").length-1))}}return{selectionStart:e,selectionEnd:t}}get rawValue(){return this.htmlInputElement&&this.htmlInputElement.value}set rawValue(e){this._storedRawValue=e,this.htmlInputElement&&(this.htmlInputElement.value=e)}get storedRawValue(){return this._storedRawValue||""}}class v{constructor(e,t){this.htmlInputElement=e,this.options=t,this.SINGLE_DIGIT_REGEX=new RegExp(/^[0-9\u0660-\u0669\u06F0-\u06F9]$/),this.ONLY_NUMBERS_REGEX=new RegExp(/[^0-9\u0660-\u0669\u06F0-\u06F9]/g),this.PER_AR_NUMBER=new Map,this.inputManager=new f(e),this.initialize()}initialize(){this.PER_AR_NUMBER.set("\u06f0","0"),this.PER_AR_NUMBER.set("\u06f1","1"),this.PER_AR_NUMBER.set("\u06f2","2"),this.PER_AR_NUMBER.set("\u06f3","3"),this.PER_AR_NUMBER.set("\u06f4","4"),this.PER_AR_NUMBER.set("\u06f5","5"),this.PER_AR_NUMBER.set("\u06f6","6"),this.PER_AR_NUMBER.set("\u06f7","7"),this.PER_AR_NUMBER.set("\u06f8","8"),this.PER_AR_NUMBER.set("\u06f9","9"),this.PER_AR_NUMBER.set("\u0660","0"),this.PER_AR_NUMBER.set("\u0661","1"),this.PER_AR_NUMBER.set("\u0662","2"),this.PER_AR_NUMBER.set("\u0663","3"),this.PER_AR_NUMBER.set("\u0664","4"),this.PER_AR_NUMBER.set("\u0665","5"),this.PER_AR_NUMBER.set("\u0666","6"),this.PER_AR_NUMBER.set("\u0667","7"),this.PER_AR_NUMBER.set("\u0668","8"),this.PER_AR_NUMBER.set("\u0669","9")}addNumber(e){const{decimal:t,precision:i,inputMode:n}=this.options;let s=String.fromCharCode(e);const a=s===this.options.decimal;if(this.rawValue){let e=this.inputSelection.selectionStart,i=this.inputSelection.selectionEnd;const l=this.rawValue.substring(0,e);let r=this.rawValue.substring(i,this.rawValue.length);const u=-1!==l.indexOf(t);n===m.NATURAL&&u&&e===i&&(r=r.substring(1));const h=l+s+r;let o=e+1;if(!a&&s!==this.options.thousands||s!==r[0]){if(!this.SINGLE_DIGIT_REGEX.test(s))return}else o++;this.rawValue=h,this.updateFieldValue(o)}else{let e;this.rawValue=this.applyMask(!1,s),n===m.NATURAL&&i>0&&(e=this.rawValue.indexOf(t),a&&e++),this.updateFieldValue(e)}}applyMask(e,t,i=!1){let{allowNegative:n,decimal:s,precision:a,prefix:l,suffix:r,thousands:u,min:h,max:o,inputMode:p}=this.options,c=(t=e?new Number(t).toFixed(a):t).replace(this.ONLY_NUMBERS_REGEX,"");if(!c&&t!==s)return"";p!==m.NATURAL||e||i||(c=(t=this.padOrTrimPrecision(t)).replace(this.ONLY_NUMBERS_REGEX,""));let d=c.slice(0,c.length-a).replace(/^\u0660*/g,"").replace(/^\u06F0*/g,"").replace(/^0*/g,"");""==d&&(d="0");let g=parseInt(d);d=d.replace(/\B(?=([0-9\u0660-\u0669\u06F0-\u06F9]{3})+(?![0-9\u0660-\u0669\u06F0-\u06F9]))/g,u),u&&d.startsWith(u)&&(d=d.substring(1));let f=d,v=c.slice(c.length-a),R=parseInt(v)||0,E=t.indexOf("-")>-1;o=this.isNullOrUndefined(o)||this.isNullOrUndefined(h)?o:Math.max(o,h);let S=g+R/100;return S=E?-S:S,!this.isNullOrUndefined(o)&&S>o?this.applyMask(!0,o+""):!this.isNullOrUndefined(h)&&S<h?this.applyMask(!0,h+""):(a>0&&(f+="0"==f&&v.length<a?s+"0".repeat(a-1)+v:s+v),(E&&n&&0!=S?"-":"")+l+f+r)}padOrTrimPrecision(e){let{decimal:t,precision:i}=this.options,n=e.lastIndexOf(t);-1===n&&(n=e.length,e+=t);let s=e.substring(n).replace(this.ONLY_NUMBERS_REGEX,"");const a=s.length;if(a<i)for(let l=a;l<i;l++)s+="0";else a>i&&(s=s.substring(0,s.length+i-a));return e.substring(0,n)+t+s}clearMask(e){if(this.isNullable()&&""===e)return null;let t=(e||"0").replace(this.options.prefix,"").replace(this.options.suffix,"");return this.options.thousands&&(t=t.replace(new RegExp("\\"+this.options.thousands,"g"),"")),this.options.decimal&&(t=t.replace(this.options.decimal,".")),this.PER_AR_NUMBER.forEach((e,i)=>{const n=new RegExp(i,"g");t=t.replace(n,e)}),parseFloat(t)}changeToNegative(){this.options.allowNegative&&""!=this.rawValue&&"-"!=this.rawValue.charAt(0)&&0!=this.value&&(this.rawValue=this.applyMask(!1,"-"+this.rawValue))}changeToPositive(){this.rawValue=this.applyMask(!1,this.rawValue.replace("-",""))}removeNumber(e){let{decimal:t,thousands:i,prefix:n,suffix:s,inputMode:a}=this.options;if(this.isNullable()&&0==this.value)return void(this.rawValue=null);let l=this.inputSelection.selectionEnd,r=this.inputSelection.selectionStart;const u=this.rawValue.length-s.length;if(l=Math.min(u,Math.max(l,n.length)),r=Math.min(u,Math.max(r,n.length)),r===l&&this.inputSelection.selectionStart!==this.inputSelection.selectionEnd)return void this.updateFieldValue(r);let h=this.rawValue.indexOf(t);-1===h&&(h=this.rawValue.length);let o=0,p="";const c=h<l,d=h+1===l;if(l===r)if(8==e){if(r<=n.length)return;r--,this.rawValue.substr(r,1).match(/\d/)||r--,a===m.NATURAL&&c&&(o=-1,d&&this.value<10&&this.value>-10&&(p+="0"))}else if(46==e||63272==e){if(r===u)return;l++,this.rawValue.substr(r,1).match(/\d/)||(r++,l++)}if(a===m.NATURAL&&r>h){const e=l-r;for(let t=0;t<e;t++)p+="0"}let g=this.rawValue.length-l;this.rawValue=this.rawValue.substring(0,r)+p+this.rawValue.substring(l),this.rawValue.substr(n.length,1)===i&&(this.rawValue=this.rawValue.substring(0,n.length)+this.rawValue.substring(n.length+1),g=Math.min(g,this.rawValue.length-n.length)),this.updateFieldValue(this.rawValue.length-g+o,!0)}updateFieldValue(e,t=!1){let i=this.applyMask(!1,this.rawValue||"",t);e=null==e?this.rawValue.length:e,e=Math.max(this.options.prefix.length,Math.min(e,this.rawValue.length-this.options.suffix.length)),this.inputManager.updateValueAndCursor(i,this.rawValue.length,e)}updateOptions(e){let t=this.value;this.options=e,this.value=t}prefixLength(){return this.options.prefix.length}suffixLength(){return this.options.suffix.length}isNullable(){return this.options.nullable}get canInputMoreNumbers(){return this.inputManager.canInputMoreNumbers}get inputSelection(){return this.inputManager.inputSelection}get rawValue(){return this.inputManager.rawValue}set rawValue(e){this.inputManager.rawValue=e}get storedRawValue(){return this.inputManager.storedRawValue}get value(){return this.clearMask(this.rawValue)}set value(e){this.rawValue=this.applyMask(!0,""+e)}isNullOrUndefined(e){return null==e}}class R{constructor(e,t){this.inputService=new v(e,t)}handleCut(e){setTimeout(()=>{this.inputService.updateFieldValue(),this.setValue(this.inputService.value),this.onModelChange(this.inputService.value)},0)}handleInput(e){let t=this.inputService.inputSelection.selectionStart,i=this.inputService.rawValue.charCodeAt(t-1),n=this.inputService.rawValue.length,s=this.inputService.storedRawValue.length;if(1!=Math.abs(n-s))return this.inputService.updateFieldValue(t),void this.onModelChange(this.inputService.value);this.inputService.rawValue=this.inputService.storedRawValue,n<s&&this.timer(()=>{this.inputService.updateFieldValue(t+1),this.inputService.removeNumber(8),this.onModelChange(this.inputService.value)},0),n>s&&(this.inputService.updateFieldValue(t-1),this.handleKeypressImpl(i))}handleKeydown(e){let t=e.which||e.charCode||e.keyCode;8!=t&&46!=t&&63272!=t||(e.preventDefault(),this.inputService.inputSelection.selectionStart<=this.inputService.prefixLength()&&this.inputService.inputSelection.selectionEnd>=this.inputService.rawValue.length-this.inputService.suffixLength()?this.clearValue():(this.inputService.removeNumber(t),this.onModelChange(this.inputService.value)))}clearValue(){this.setValue(this.inputService.isNullable()?null:0),this.onModelChange(this.inputService.value)}handleKeypress(e){let t=e.which||e.charCode||e.keyCode;e.preventDefault(),97===t&&e.ctrlKey||this.handleKeypressImpl(t)}handleKeypressImpl(e){switch(e){case void 0:case 9:case 13:return;case 43:this.inputService.changeToPositive();break;case 45:this.inputService.changeToNegative();break;default:this.inputService.canInputMoreNumbers&&(Math.abs(this.inputService.inputSelection.selectionEnd-this.inputService.inputSelection.selectionStart)==this.inputService.rawValue.length&&this.setValue(null),this.inputService.addNumber(e))}this.onModelChange(this.inputService.value)}handlePaste(e){setTimeout(()=>{this.inputService.updateFieldValue(),this.setValue(this.inputService.value),this.onModelChange(this.inputService.value)},1)}updateOptions(e){this.inputService.updateOptions(e)}getOnModelChange(){return this.onModelChange}setOnModelChange(e){this.onModelChange=e}getOnModelTouched(){return this.onModelTouched}setOnModelTouched(e){this.onModelTouched=e}setValue(e){this.inputService.value=e}timer(e,t){setTimeout(e,t)}}const E={provide:a.JU,useExisting:(0,l.Gpc)(()=>S),multi:!0};let S=(()=>{class e{constructor(e,t,i){this.currencyMaskConfig=e,this.elementRef=t,this.keyValueDiffers=i,this.options={},this.optionsTemplate={align:"right",allowNegative:!0,allowZero:!0,decimal:".",precision:2,prefix:"$ ",suffix:"",thousands:",",nullable:!1,inputMode:m.FINANCIAL},e&&(this.optionsTemplate=e),this.keyValueDiffer=i.find({}).create()}ngAfterViewInit(){this.elementRef.nativeElement.style.textAlign=this.options&&this.options.align?this.options.align:this.optionsTemplate.align}ngDoCheck(){this.keyValueDiffer.diff(this.options)&&(this.elementRef.nativeElement.style.textAlign=this.options.align?this.options.align:this.optionsTemplate.align,this.inputHandler.updateOptions(Object.assign({},this.optionsTemplate,this.options)))}ngOnInit(){this.inputHandler=new R(this.elementRef.nativeElement,Object.assign({},this.optionsTemplate,this.options))}handleBlur(e){this.inputHandler.getOnModelTouched().apply(e)}handleCut(e){this.isChromeAndroid()||!this.isReadOnly()&&this.inputHandler.handleCut(e)}handleInput(e){this.isChromeAndroid()&&!this.isReadOnly()&&this.inputHandler.handleInput(e)}handleKeydown(e){this.isChromeAndroid()||!this.isReadOnly()&&this.inputHandler.handleKeydown(e)}handleKeypress(e){this.isChromeAndroid()||!this.isReadOnly()&&this.inputHandler.handleKeypress(e)}handlePaste(e){this.isChromeAndroid()||!this.isReadOnly()&&this.inputHandler.handlePaste(e)}handleDrop(e){this.isChromeAndroid()||e.preventDefault()}isChromeAndroid(){return/chrome/i.test(navigator.userAgent)&&/android/i.test(navigator.userAgent)}isReadOnly(){return this.elementRef.nativeElement.hasAttribute("readonly")}registerOnChange(e){this.inputHandler.setOnModelChange(e)}registerOnTouched(e){this.inputHandler.setOnModelTouched(e)}setDisabledState(e){this.elementRef.nativeElement.disabled=e}writeValue(e){this.inputHandler.setValue(e)}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(g,8),l.Y36(l.SBq),l.Y36(l.aQg))},e.\u0275dir=l.lG2({type:e,selectors:[["","currencyMask",""]],hostBindings:function(e,t){1&e&&l.NdJ("blur",function(e){return t.handleBlur(e)})("cut",function(e){return t.handleCut(e)})("input",function(e){return t.handleInput(e)})("keydown",function(e){return t.handleKeydown(e)})("keypress",function(e){return t.handleKeypress(e)})("paste",function(e){return t.handlePaste(e)})("drop",function(e){return t.handleDrop(e)})},inputs:{options:"options"},features:[l._Bn([E])]}),e})(),M=(()=>{class e{static forRoot(t){return{ngModule:e,providers:[{provide:g,useValue:t}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[n.ez,a.u5]]}),e})();var w=i(4369),V=i(7064);function N(e,t){if(1&e&&(l.TgZ(0,"mat-option",9),l._uU(1),l.qZA()),2&e){const e=t.$implicit;l.Q6J("value",e.id),l.xp6(1),l.Oqu(e.nome)}}const A=[{path:"create",component:(()=>{class e{constructor(e,t,i,n){this.formBuilder=e,this.comprasService=t,this.contasService=i,this.router=n,this.contas=[],this.formCompras=this.formBuilder.group({contas_id:["",a.kI.required],data:["",a.kI.required],descricao:["",a.kI.required],valor:["",a.kI.required]})}ngOnInit(){this.getContas()}getContas(){this.contasService.readContas().subscribe({next:e=>{this.contas=e},error:e=>console.log(e)})}onSubmit(){var e;this.formCompras.patchValue({data:this.dateFormat(null===(e=this.formCompras.get("data"))||void 0===e?void 0:e.value)}),this.comprasService.create(this.formCompras.value).subscribe({next:e=>{this.router.navigate([""])},error:e=>console.log(e)})}onCancel(e){e.preventDefault(),this.router.navigate([""])}setValue(e){this.formCompras.patchValue({contas_id:e})}dateFormat(e){const t=e.slice(0,2),i=e.slice(2,4);return`${e.slice(4,8)}-${i}-${t}`}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(a.qu),l.Y36(r.K),l.Y36(u.p),l.Y36(s.F0))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-compras-create"]],decls:20,vars:3,consts:[[3,"formGroup","ngSubmit"],[3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","mask","00/00/0000","placeholder","Data da compra dd/mm/aaaa *","name","data","formControlName","data"],["maxlength","50","matInput","","placeholder","Descri\xe7\xe3o *","name","descricao","formControlName","descricao"],["currencyMask","","matInput","","placeholder","Valor *","name","valor","formControlName","valor"],[1,"action-buttons"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-raised-button","","type","submit",3,"click"],[3,"value"]],template:function(e,t){1&e&&(l.TgZ(0,"mat-card"),l.TgZ(1,"mat-card-title"),l._uU(2," Nova compra "),l.qZA(),l.TgZ(3,"form",0),l.NdJ("ngSubmit",function(){return t.onSubmit()}),l.TgZ(4,"mat-form-field"),l.TgZ(5,"mat-label"),l._uU(6,"Cliente *"),l.qZA(),l.TgZ(7,"mat-select",1),l.NdJ("selectionChange",function(e){return t.setValue(e.value)}),l.YNc(8,N,2,2,"mat-option",2),l.qZA(),l.qZA(),l.TgZ(9,"mat-form-field"),l._UZ(10,"input",3),l.qZA(),l.TgZ(11,"mat-form-field"),l._UZ(12,"input",4),l.qZA(),l.TgZ(13,"mat-form-field"),l._UZ(14,"input",5),l.qZA(),l.TgZ(15,"div",6),l.TgZ(16,"button",7),l._uU(17," Salvar "),l.qZA(),l.TgZ(18,"button",8),l.NdJ("click",function(e){return t.onCancel(e)}),l._uU(19," Cancelar "),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.xp6(3),l.Q6J("formGroup",t.formCompras),l.xp6(5),l.Q6J("ngForOf",t.contas),l.xp6(8),l.Q6J("disabled",!t.formCompras.valid))},directives:[h.a8,h.n5,a._Y,a.JL,a.sg,o.KE,o.hX,p.gD,n.sg,c.Nt,d.hx,a.Fj,a.JJ,a.u,a.nD,S,w.lW,V.ey],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column}button[_ngcontent-%COMP%]{margin-right:15px;margin-top:20px}.mat-card[_ngcontent-%COMP%]{margin-top:40px}"]}),e})()}];let _=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[s.Bz.forChild(A)],s.Bz]}),e})();var C=i(8991);const b={align:"left",allowNegative:!1,allowZero:!1,decimal:",",precision:2,prefix:"R$ ",suffix:"",thousands:".",nullable:!0};let I=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[n.ez,_,C.Q,a.UX,M.forRoot(b),d.yI.forRoot()]]}),e})()}}]);